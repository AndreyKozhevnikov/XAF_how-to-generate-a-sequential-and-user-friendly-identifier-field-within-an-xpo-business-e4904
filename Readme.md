<!-- default badges list -->
![](https://img.shields.io/endpoint?url=https://codecentral.devexpress.com/api/v1/VersionRange/128590649/15.2.4%2B)
[![](https://img.shields.io/badge/Open_in_DevExpress_Support_Center-FF7200?style=flat-square&logo=DevExpress&logoColor=white)](https://supportcenter.devexpress.com/ticket/details/E4904)
[![](https://img.shields.io/badge/ðŸ“–_How_to_use_DevExpress_Examples-e9f6fc?style=flat-square)](https://docs.devexpress.com/GeneralInformation/403183)
<!-- default badges end -->
<!-- default file list -->
*Files to look at*:

* [TestUserFriendlyCodeObject.cs](./CS/Solution2.Module/BusinessObjects/TestUserFriendlyCodeObject.cs) (VB: [TestUserFriendlyCodeObject.vb](./VB/Solution2.Module/BusinessObjects/TestUserFriendlyCodeObject.vb))
* [E4904.ets](./CS/Solution2.Module/FunctionalTests/E4904.ets) (VB: [E4904.ets](./VB/Solution2.Module/FunctionalTests/E4904.ets))
<!-- default file list end -->
# How to generate a sequential and user-friendly identifier field within an XPO business class


<p>This example illustrates one of the possible approaches to implementing anÂ identifier field with sequential values. Alternate approaches are listed in theÂ <a href="https://www.devexpress.com/Support/Center/p/T567184">An overview of approaches to implementing a user-friendly sequential number for use with an XPO business class</a>Â KB article.<strong><br><br>Scenario</strong></p>
<p>Orders, articles or other business entities often require that you have user-friendly Id or Code fields that end-users can memorize and use during phone conversations. They are usually sequential, but some gaps can be allowed as well (e.g., when an order is deleted). Refer to <a href="http://stackoverflow.com/questions/5924499/"><u>this StackOverFlow thread</u></a> for more information on this common scenario, and a possible implementation.<br><br></p>
<p><strong>Steps to implement</strong></p>
<p><strong>1.</strong>Add a new business class to your platform-agnostic module and call the static DevExpress.Persistent.BaseImpl.DistributedIdGeneratorHelper.Generate method in OnSaving. Depending on your business requirements, you can implement a readonly persistent or editable property where the generated value will be stored as well as check various conditions before generating the next sequence (e.g., string.IsNullOrEmpty(currentSequenceProperty) - to avoid double assignments, Session.IsNewObject(this) - to check whether the object is new, !(Session is NestedUnitOfWork) - to checkÂ whether the object is being saved to the database and not to the parent session, security system checks as per <a href="http://dennisgaravsky.blogspot.com/2013/03/beware-of-sessiondatalayer-in-middle.html">this blog post</a>, etc.)</p>
<p>Take special note that you can use any strings as the "seqType" Â and "serverPrefix" (optional) parameters that allow you to run named sequences inÂ parallel (these parameters determine criteria for Â updating right sequences). In the demo, I am just using the full persistent type name and a custom prefix, which can be changed as you need:</p>
<p><img src="https://raw.githubusercontent.com/DevExpress-Examples/how-to-generate-a-sequential-and-user-friendly-identifier-field-within-an-xpo-business-class-e4904/15.2.4+/media/23987c12-512c-11e7-80c0-00155d624807.png"></p>
<p><strong>2.</strong> Build your platform-agnostic project and double-click on the <em>Solution2.Module\Module.xx</em> file to invoke the <a href="http://documentation.devexpress.com/#Xaf/CustomDocument2828"><u>Module Designer</u></a>;</p>
<p><strong>3.</strong> Refer to the <em>Exported Types</em> section within the designer and expand the <em>Referenced Assemblies | DevExpress.Persistent.BaseImpl</em> node;</p>
<p><strong>4.</strong> Select and press the space bar on the <em>OidGenerator</em> node to include this persistent type into the business model of your module:<br><img src="https://raw.githubusercontent.com/DevExpress-Examples/how-to-generate-a-sequential-and-user-friendly-identifier-field-within-an-xpo-business-class-e4904/15.2.4+/media/ea171854-ec1c-11e5-80bf-00155d62480c.png"></p>
<p>Â </p>
<p><strong>IMPORTANT NOTES</strong><br> <strong>1.</strong> The <em>DistributedIdGeneratorHelper </em>class demonstrated in this solution creates the <em>IDGeneratorTable </em>table to store the information about the last sequential number of a type. You can learn more on how this works from its source code atÂ "C:\Program Files (x86)\DevExpress 1X.X\Components\Sources\DevExpress.Persistent\DevExpress.Persistent.BaseImpl\IDGenerator.cs".<br> Although this particular solution is simpler to implement and maintain (as it uses built-in XAF classes) than the <a href="https://www.devexpress.com/Support/Center/p/E2829">How to generate and assign a sequential number for a business object within a database transaction, while being a part of a successful saving process (XAF)</a> example, it is pretty safe and should also work in the most typical business scenarios.<br><strong>2.</strong>Â If you have validation rules for your business class, theÂ OnSaving method (and thus the sequence generation) is called only after all validation is passed. However, in rare cases,Â if a database related error is thrown during the first save and then the form is re-saved, the OnSaving method may be called again and a new sequence can be generated. This may lead to gaps inÂ sequential numbers, which is not always allowed by business requirements (e.g., government regulations). To avoid this, you can use a more complicated solution from theÂ <a href="https://www.devexpress.com/Support/Center/p/E2829">How to generate and assign a sequential number for a business object within a database transaction, while being a part of a successful saving process (XAF)</a>Â example or implement a database-level solution to handle such situations (e.g., using triggers).</p>
<p><strong>3</strong>.Â Â In the <a href="https://documentation.devexpress.com/#eXpressAppFramework/CustomDocument113436">Integrated Mode</a>Â andÂ <a href="http://documentation.devexpress.com/#Xaf/CustomDocument3438"><u>middle-tier Application Server</u></a> scenario the newly generated sequence number will appear in the DetailView only after a manual refresh (i.e., it will be empty right away after saving a new record), because the sequence is generated on the server side only and is not passed to the client. See the "Refresh the Identifier field value in UI" section <a href="https://www.devexpress.com/Support/Center/p/T567184">in this KB article</a>.</p>
<p><strong>4.</strong> You can find functional <a href="http://documentation.devexpress.com/#Xaf/CustomDocument3206"><u>EasyTest</u></a> scripts for this scenario in the <em>Solution2.Module\FunctionalTests\E4904.ets</em> file.<br><strong>5.</strong>Â You can specify the initial sequence value manually: either by editing theÂ <em>IDGeneratorTable</em> table in the database or using <a href="https://documentation.devexpress.com/eXpressAppFramework/CustomDocument113711.aspx">the standard XPO/XAF</a>Â means by manipulating theÂ <em>DevExpress.Persistent.BaseImpl.OidGenerator</em> objects. Another simpler solution would be using a different server prefix, e.g. "2017" or "2018" to start numbering with 1 again.<br><br><br>

<br/>


